const init=()=>{document.removeEventListener("DOMContentLoaded",init);const e=document.getElementById("readMoreButton"),t=document.getElementById("infoTextHidden"),o=document.getElementById("popup"),d=document.querySelector(".popup__close"),n=document.getElementById("popupOpenButton");e.addEventListener("click",()=>{e.classList.add("link--destroyed"),setTimeout(()=>{e.parentNode.removeChild(e),t.classList.remove("info-text--hidden"),t.classList.add("info-text--shown")},300)}),n.addEventListener("click",()=>{o.classList.remove("popup--closed"),document.addEventListener("keydown",s),document.body.classList.add("overflow-hidden")}),d.addEventListener("click",()=>{o.classList.add("popup--closed"),document.body.classList.remove("overflow-hidden")});const s=e=>{"Escape"===e.key&&(o.classList.add("popup--closed"),document.removeEventListener("keydown",s),document.body.classList.remove("overflow-hidden"))},r=document.querySelectorAll(".nav-item"),l=document.getElementById("info").offsetTop,c=document.getElementById("testimonials").offsetTop,i=document.getElementById("kit").offsetTop,a=e=>{r.forEach(e=>{e.classList.remove("nav-item--active")}),e.classList.add("nav-item--active")},m=()=>{window.scrollY+200-l<=6&&window.scrollY+200-l>0?a(r[1]):window.scrollY+200-c<=6&&window.scrollY+200-c>0?a(r[2]):window.scrollY+200-i>0?a(r[3]):window.scrollY<l/2&&a(r[0])};document.addEventListener("scroll",m),m(),r.forEach(e=>{e.addEventListener("click",()=>{a(e)})});const u=document.getElementById("footerForm"),p=document.getElementById("popupForm"),v=async e=>{let t=f(e),o=new FormData(e);if(0===t){(await fetch("libs/mail/form.php",{method:"POST",body:o})).ok?(Toast.add({text:"Вы успешно отправили заявку. Ожидайте ответа!",color:"#28a745",autohide:!0,delay:5e3}),e.reset()):Toast.add({text:"Ошибка отправки данных. Повторите попытку позже.",color:"#FFD654",autohide:!0,delay:5e3})}else Toast.add({text:"Заполните обязательные поля",color:"#FFD654",autohide:!0,delay:5e3})};u.addEventListener("submit",e=>{e.preventDefault(),v(u)}),p.addEventListener("submit",e=>{e.preventDefault(),v(p)});const f=e=>{let t=0,o=e.querySelectorAll("._req");console.log(o);for(let e=0;e<o.length;e+=1){const d=o[e];w(d),d.classList.contains("_email")?E(d)&&(L(d),t+=1):d.classList.contains("footer__form-check__input")&&!d.checked?(L(d),t+=1):""===d.value&&(L(d),t+=1)}return t},L=e=>{e.parentElement.classList.add("footer__form-group--error"),e.classList.add("footer__form-input--error")},w=e=>{e.parentElement.classList.remove("footer__form-group--error"),e.classList.remove("footer__form-input--error")},E=e=>!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)};document.addEventListener("DOMContentLoaded",init);
